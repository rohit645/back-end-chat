(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(62),o=a.n(c),s=a(5),l=a(6),i=a(8),u=a(7),m=a(2),f=a(168),p=a(170),h=a(167),d=a(34),v=a.n(d),E=(a(73),a(13)),g=a(14),y=a(166),b=a(169),j=a(63),N=a.n(j);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var R=function(e){Object(i.a)(a,e);var t=O(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"activeUsers"},r.a.createElement("h2",{className:"headline"},"Active users"),r.a.createElement("div",{id:"users"},r.a.createElement("ul",null,this.props.users.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("i",{className:"fas fa-circle"}),r.a.createElement("span",null,e))}))))}}]),a}(n.Component);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var w,k=function(e){Object(i.a)(a,e);var t=S(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"messages"},r.a.createElement("div",{id:"list"},r.a.createElement("ul",null,this.props.messages.filter(function(t){return t.room===e.props.room}).map(function(e,t){return r.a.createElement("li",{key:t},e.url&&r.a.createElement("div",null,r.a.createElement("div",{className:"msg"},r.a.createElement("h4",null,e.from),r.a.createElement("div",{className:"body"},r.a.createElement("a",{href:e.url,rel:"noopener noreferrer",target:"_blank"},"My current location"))),r.a.createElement("span",{className:"createdDate"},e.createdDate)),!e.url&&r.a.createElement("div",null,r.a.createElement("div",{className:"msg"},r.a.createElement("h4",null,e.from),r.a.createElement("div",{className:"body"},r.a.createElement("p",null,e.text))),r.a.createElement("span",{className:"createdDate"},e.createdDate)))}))))}}]),a}(n.Component),D=a(36),_=a.n(D),C=a(64),M=a.n(C);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var F={users:[],messages:[],newMsg:"",fetchingLocation:!1},L=function(e){Object(i.a)(a,e);var t=x(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state=Object(g.a)({},F),n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){var e={room:this.props.match.params.room};w.emit("leave",e),this.setState(Object(g.a)({},F))}},{key:"componentDidMount",value:function(){var e=this,t=this,a={name:this.props.match.params.name,room:this.props.match.params.room};(w=N()("http://localhost:8080")).emit("join",a,function(e){e&&this.props.history.push("/")}),w.on("updateUserList",function(e){t.setState({users:e})}),w.on("newMessage",function(a){var n=_()(a.createdDate).format("h:mm a"),r={text:a.text,from:a.from,room:a.room,createdDate:n},c=t.state.messages;c.push(r),t.setState({messages:c}),t.state.messages.filter(function(t){return t.room===e.props.match.params.room}).length>3&&t.scrollToBottom()}),w.on("createLocationMsg",function(e){var a=_()(e.createdDate).format("h:mm a"),n={url:e.url,from:e.from,room:e.room,createdDate:a},r=t.state.messages;r.push(n),t.setState({messages:r,fetchingLocation:!1})}),w.on("disconnect",function(){console.log("Connection lost from server.")})}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".messages #list ul"),t=document.querySelector(".messages #list"),a=document.querySelector(".messages #list ul li:last-child"),n=e.clientHeight,r=t.clientHeight,c=t.scrollTop,o=t.scrollHeight;r+c+a.offsetHeight+a.previousSibling.offsetHeight>=o&&document.querySelector("#list").scrollTo(0,n)}},{key:"clearForm",value:function(){this.setState({newMsg:""})}},{key:"inputUpdate",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"newMessage",value:function(e){e.preventDefault();var t={text:this.state.newMsg};w.emit("createMessage",t,function(e){}),this.clearForm()}},{key:"sendLocation",value:function(){if(this.setState({fetchingLocation:!0}),!navigator.geolocation)return alert("GeoLocation not supported by your browser");navigator.geolocation.getCurrentPosition(function(e){w.emit("createLocationMsg",{lat:e.coords.latitude,lon:e.coords.longitude})},function(){alert("Unable to fetch location")})}},{key:"render",value:function(){var e=this,t=this.state.newMsg;return r.a.createElement("div",{className:"chatPage"},r.a.createElement(M.a,{loading:this.state.fetchingLocation,bgColor:"#F5F7F4",spinnerColor:"#3597DE",textColor:"#010000",text:"Fetching your current location"},r.a.createElement("div",{className:"hide"})),r.a.createElement(R,{users:this.state.users}),r.a.createElement("div",{className:"messages_wrap"},r.a.createElement("h1",null,r.a.createElement(y.a,{to:"/"},r.a.createElement("i",{className:"fas fa-chevron-circle-left"})),this.props.match.params.room),r.a.createElement(k,{messages:this.state.messages,room:this.props.match.params.room}),r.a.createElement("div",{className:"newMsgForm"},r.a.createElement("div",{className:"wrap"},r.a.createElement("form",{onSubmit:function(t){return e.newMessage(t)}},r.a.createElement("div",{className:"form_wrap"},r.a.createElement("div",{className:"form_row"},r.a.createElement("div",{className:"form_item"},r.a.createElement("div",{className:"form_input"},r.a.createElement("input",{name:"newMsg",placeholder:"Type your message...",autoComplete:"off",value:t,onChange:this.inputUpdate.bind(this)}),r.a.createElement("span",{className:"bottom_border"}))))),r.a.createElement("div",{className:"btnWrap"},r.a.createElement("button",{type:"submit",className:"btn"},r.a.createElement("i",{className:"fab fa-telegram-plane"})),r.a.createElement("button",{id:"send_location",className:"btn",onClick:function(){return e.sendLocation()}},r.a.createElement("i",{className:"far fa-compass"}))))))))}}]),a}(n.Component),U=Object(b.a)(L);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var J={name:"",room:""},H=function(e){Object(i.a)(a,e);var t=P(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state=Object(g.a)({},J),e}return Object(l.a)(a,[{key:"clearForm",value:function(){this.setState(Object(g.a)({},J))}},{key:"inputUpdate",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(E.a)({},t,a))}},{key:"join",value:function(){var e=this.state,t=e.name,a=e.room;t&&a&&this.props.history.push("/chat/".concat(t,"/").concat(a))}},{key:"render",value:function(){var e=this,t=this.state.name;return r.a.createElement("div",{className:"joinForm"},r.a.createElement("div",{className:"form_wrap"},r.a.createElement("div",{className:"form_row"},r.a.createElement("div",{className:"form_item"},r.a.createElement("div",{className:"form_input"},r.a.createElement("input",{type:"text",placeholder:"Full Name",autoComplete:"off",name:"name",value:t,onChange:this.inputUpdate.bind(this)}),r.a.createElement("span",{className:"bottom_border"})))),r.a.createElement("div",{className:"form_row"},r.a.createElement("div",{className:"form_item"},r.a.createElement("div",{className:"form_select"},r.a.createElement("select",{name:"room",onChange:this.inputUpdate.bind(this)},r.a.createElement("option",{value:""},"Please select a group"),r.a.createElement("option",{value:"React JS"},"React JS"),r.a.createElement("option",{value:"Node JS"},"Node JS")),r.a.createElement("i",{className:"fas fa-chevron-down"})))),r.a.createElement("div",{className:"form_buttons"},r.a.createElement("button",{onClick:function(){return e.join()},className:"btn"},"Join"))))}}]),a}(n.Component),T=Object(b.a)(H);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var B=function(e){Object(i.a)(a,e);var t=q(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={site_loaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({site_loaded:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:v()({App:!0,site_loaded:this.state.site_loaded})},r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement(h.a,{path:"/chat/:name/:room",component:U}),r.a.createElement(h.a,{path:"/",component:T}))))}}]),a}(n.Component);o.a.render(r.a.createElement(B,null),document.getElementById("root"))},68:function(e,t,a){e.exports=a(164)},73:function(e,t,a){}},[[68,2,1]]]);
//# sourceMappingURL=main.0327abd0.chunk.js.map